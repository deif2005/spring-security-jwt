<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.order.machine.mapper.RoleMapper">

    <select id="getRoleByUserName" resultType="com.order.machine.po.RolePo">
        SELECT
          a.id,
          a.role_name,
          a.role_name_zh
        FROM tb_role a,tb_user_role b
        WHERE a.id=b.role_id AND b.user_name=#{userName}
    </select>

    <select id="getRoleByResource" resultType="com.order.machine.po.RolePo">
        SELECT
        a.id,
        a.role_name,
        a.role_name_zh
        FROM tb_role a,tb_role_resource b
        WHERE a.id=b.role_id AND b.resource_id=${resourceId}
    </select>

    <select id="getMenuResourceByUserName" resultType="com.order.machine.po.MenuPo">
        SELECT
        b.id,
        b.name,
        b.level,
        b.parent_id,
        b.sort,
        b.status,
        b.creater
        FROM tb_role_menu a,tb_menu_resource b,tb_user_role c
        WHERE a.menu_resource_id=b.id AND a.role_id=c.role_id AND c.user_name=#{userName}
    </select>

</mapper>